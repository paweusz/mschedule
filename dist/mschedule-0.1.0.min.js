/*! mschedule - v0.1.0 - 2012-10-04 */
(function(){"use strict";angular.module("MSchedule",[]),$(document).on("mobileinit",function(){$.mobile.autoInitializePage=!1})})(),function(){"use strict";angular.module("MSchedule").factory("Domain",function(){function e(e,t){return new Date(0,0,1,e,t)}function t(t,n,r,i){this.start=e(t,n),this.end=e(r,i)}return t.prototype={getStartHour:function(){return this.start.getHours()},getStartMinute:function(){return this.start.getMinutes()},getEndHour:function(){return this.end.getHours()},getEndMinute:function(){return this.end.getMinutes()}},{weekdays:[{id:"mon",name:"Poniedziałek"},{id:"tue",name:"Wtorek"},{id:"wed",name:"Środa"},{id:"thu",name:"Czwartek"},{id:"fri",name:"Piątek"}],subjects:{ew:"Edukacja wczesnoszkolna",inf:"Zajęcia komputerowe",ewsg:"Wychowanie fizyczne",ang:"Język angielski",rel:"Religia"},lessons:[["ew","ew","ew","inf"],["ew","ewsg","ang","ew","ew"],["ew","ew","ew","rel","ang"],["ew","ewsg","ew","ew","ew"],[null,null,"rel","ew","ew","ew"]],timeslots:[new t(8,0,8,45),new t(8,50,9,35),new t(9,45,10,30),new t(10,40,11,25),new t(11,45,12,30),new t(12,45,13,30),new t(13,35,14,20),new t(14,25,15,10)],hmToDate:e}})}(),function(){"use strict";angular.module("MSchedule").controller("ScheduleCtrl",["$scope","Domain",function(e,t){function n(e){var t=e.getDay();return t===0&&(t=7),t-1}function r(e){var r=t.weekdays.length,i=n(e);if(i>r)return 0;var s=i,o=t.lessons[i].length,u=t.timeslots[o-1];return t.hmToDate(e.getHours(),e.getMinutes())>u.end&&(i+1>=r?s=0:s=i+1),s}function i(e){var r=t.weekdays.length,i=n(e);if(i>r)return-1;var s=-1,o=t.lessons[i],u=t.timeslots,a=t.hmToDate(e.getHours(),e.getMinutes());for(var f=0;f<o.length;f++){var l=f===0?u[0].start:u[f-1].end,c=u[f].end;if(l<=a&&a<c){s=f;break}}return s}var s=new Date,o=r(s),u=i(s);e.weekdays=_.map(t.weekdays,function(e,n){return{id:e.id,name:e.name,lessons:_.map(t.lessons[n],function(e){return e!==null?t.subjects[e]:null}),nextId:n+1<t.weekdays.length?t.weekdays[n+1].id:t.weekdays[0].id,prevId:n>0?t.weekdays[n-1].id:t.weekdays[t.weekdays.length-1].id,idx:n,lessonIdx:n===o?u:-1}}),e.theme=function(e,t){return o===e&&u===t?"e":"c"},e.setSelectedLesson=function(n,r){function u(e){var t="";return e!==null&&(t=e.toString(),t.length===1&&(t+="0")),t}var i=t.lessons[n],s=i[r],o=t.timeslots[r];e.subject=s!==null?t.subjects[s]:null,e.startTime=o.getStartHour()+":"+u(o.getStartMinute()),e.endTime=o.getEndHour()+":"+u(o.getEndMinute())},window.location.hash=t.weekdays[o].id}])}();