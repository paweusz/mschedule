/*! mschedule - v0.1.0 - 2012-10-04 */
(function(){"use strict";angular.module("MSchedule",[])})(),function(){"use strict";angular.module("MSchedule").factory("Domain",function(){function e(e,t){return new Date(0,0,1,e,t)}function t(t,n,r,i){this.start=e(t,n),this.end=e(r,i)}return t.prototype={getStartHour:function(){return this.start.getHours()},getStartMinute:function(){return this.start.getMinutes()},getEndHour:function(){return this.end.getHours()},getEndMinute:function(){return this.end.getMinutes()}},{weekdays:["Poniedziałek","Wtorek","Środa","Czwartek","Piątek"],subjects:{ew:"Edukacja wczesnoszkolna",inf:"Zajęcia komputerowe",ewsg:"Wychowanie fizyczne",ang:"Język angielski",rel:"Religia"},lessons:[["ew","ew","ew","inf"],["ew","ewsg","ang","ew","ew"],["ew","ew","ew","rel","ang"],["ew","ewsg","ew","ew","ew"],[null,null,"rel","ew","ew","ew"]],timeslots:[new t(8,0,8,45),new t(8,50,9,35),new t(9,45,10,30),new t(10,40,11,25),new t(11,45,12,30),new t(12,45,13,30),new t(13,35,14,20),new t(14,25,15,10)],hmToDate:e}})}(),function(){"use strict";angular.module("MSchedule").controller("ScheduleCtrl",["$scope","Domain",function(e,t){function n(e){var t=e.getDay();return t===0&&(t=7),t-1}function r(e){var r=t.weekdays.length,i=n(e);if(i>r)return 0;var s=i,o=t.lessons[i].length,u=t.timeslots[o-1];return t.hmToDate(e.getHours(),e.getMinutes())>u.end&&(i+1>=r?s=0:s=i+1),s}function i(e){var r=t.weekdays.length,i=n(e);if(i>r)return-1;var s=-1,o=t.lessons[i],u=t.timeslots,a=t.hmToDate(e.getHours(),e.getMinutes());for(var f=0;f<o.length;f++){var l=f===0?u[0].start:u[f-1].end,c=u[f].end;if(l<=a&&a<c){s=f;break}}return s}function s(){e.current=t.weekdays[e.weekdayIdx]}function o(){e.lessons=_.map(t.lessons[e.weekdayIdx],function(e){return e!==null?t.subjects[e]:null});var r=new Date;e.lessonIdx=e.weekdayIdx===n(r)?i(r):-1}function u(){s(),o()}e.weekdayIdx=r(new Date),e.backward=function(){e.weekdayIdx=e.weekdayIdx-1>=0?e.weekdayIdx-1:t.weekdays.length-1,u()},e.forward=function(){e.weekdayIdx=e.weekdayIdx+1<t.weekdays.length?e.weekdayIdx+1:0,u()},e.theme=function(t){return e.lessonIdx===t?"e":"c"},e.setSelectedLesson=function(n){function o(e){var t="";return e!==null&&(t=e.toString(),t.length===1&&(t+="0")),t}var r=t.lessons[e.weekdayIdx],i=r[n],s=t.timeslots[n];e.subject=i!==null?t.subjects[i]:null,e.startTime=s.getStartHour()+":"+o(s.getStartMinute()),e.endTime=s.getEndHour()+":"+o(s.getEndMinute())},e.subject=null,u(e)}])}();